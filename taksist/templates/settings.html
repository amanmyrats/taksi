{% extends "base.html" %}
{% load static %}
{% block settings %}

<div class="container" style="margin-top: 100px;">
  <h1>{{ msg }}</h1>
    <div class="row justify-content-center">
        <form method="POST" action="" enctype="multipart/form-data">
          {% csrf_token %}

            <div class="form-row">
              <div class="form-group col-md-6">
                <label for="name">Adyňyz</label>
                {{ form_user.first_name }}
              </div>

              <div class="form-group col-md-6">
                <label for="surname">Familiýaňyz</label>
                {{ form_user.last_name }}
              </div>
            </div>
          
              <div class="form-group col-md-6">
                <label for="status">Status</label>
                {{ form_profile.status }}
              </div>

              <div class="form-group col-md-6">
                <label for="category">Category</label>
                {{ form_profile.category }}
              </div>

              <div class="form-group col-md-6">
                <label for="mobile">Telefon</label>
                {{ form_profile.mobile }}
              </div>

            <div class="form-row">
              <div class="form-group col-md-6">
                <label for="from">Nireden?</label>
                {{ form_profile.nireden }}
              </div>

              <div class="form-group col-md-6">
                <label for="to">Nirä?</label>
                {{ form_profile.nira }}
              </div>

            </div>

              <div class="form-row justify-content-center">
                  <div> 
                      <img src="{{ request.user.taxiprofile.user_photo.url }}" class="img-thumbnail" alt="Profile-Image" >
                      <h6 class="f-w-600">Sürüjiniň suraty</h6>
                      {{ form_profile.user_photo }}
                  </div>
              </div>

              <div class="form-row justify-content-center">
                <div>
                  <img src="{{ request.user.taxiprofile.car_photo.url }}" class="img-thumbnail" alt="Car-Image" >
                    <h6 class="f-w-600">Ulagyň suraty</h6>
                    {{ form_profile.car_photo }}
                </div>
              </div>

              <div class="form-row justify-content-center">
                <button class="btn btn-primary btn-lg" type="submit">Ýatda Sakla</button>
              </div>

        </form>
      </div>
    </div>
</div>



{% endblock %}
{% block javascript %}
 <script>
   $("select#id_category").change(function(){
     console.log("category changed to" + $(this).val())
     var category_id = $(this).val()
     var oldSelectedOptionValue = $(this).val()
     console.log(category_id)
     if (category_id == 1) {
       console.log("inside if 1");
       $("label[for='from']").html("Haýsy Şäherde?")
       $("label[for='to']").html("Niresinde?")
       $("select#id_nira option[value='1']").show();
      $("select#id_nira option[value='2']").show();
      $("select#id_nira option[value='" + oldSelectedOptionValue + "']").prop("selected","");
       $("select#id_nira option[value='" + category_id + "']").prop("selected","selected");
      $("select#id_nira").prop("disabled", true);
     } else if (category_id == 2){
      console.log("inside if 2");
      $("label[for='from']").html("Haýsy Şäherde?")
      $("label[for='to']").html("Niresinde?")
      $("select#id_nira option[value='1']").show();
      $("select#id_nira option[value='2']").show();
      $("select#id_nira option[value='" + oldSelectedOptionValue + "']").prop("selected","");
      $("select#id_nira option[value='" + category_id + "']").prop("selected","selected");
      $("select#id_nira").prop("disabled", true);
     } else {
      console.log("inside else");
      $("label[for='from']").html("Nireden?")
      $("label[for='to']").html("Nirä?")
      $("select#id_nira option[value='1']").hide();
      $("select#id_nira option[value='2']").hide();
      $("select#id_nira").prop("disabled", false);
      $("select#id_nira option[value='']").prop("selected","selected");
     }

   })
</script>
{% endblock %}
